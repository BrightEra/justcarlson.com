# External Integrations

**Analysis Date:** 2026-01-28

## APIs & External Services

**Analytics & Performance:**
- Vercel Analytics - Web vitals and user analytics
  - SDK: `@vercel/analytics` 1.6.1
  - Activation: Injected in production via `src/components/Analytics.astro`
  - Endpoint: `https://va.vercel-scripts.com` (CSP allowed)

- Vercel Speed Insights - Core Web Vitals monitoring
  - SDK: `@vercel/speed-insights` 1.3.1
  - Activation: Injected in production via `src/components/Analytics.astro`
  - Endpoint: `https://vitals.vercel-insights.com` (CSP allowed)

**Social Media & Embeds:**
- Twitter/X API - Tweet embedding and sharing
  - CDN: `https://platform.twitter.com`, `https://cdn.syndication.twimg.com`
  - Allowed in CSP for frame-src and script-src
  - Share URL: `https://x.com/intent/post?url=` (in `src/constants.ts`)

- Vimeo - Video embedding
  - CDN: `https://player.vimeo.com`, `https://vimeo.com`
  - Allowed in CSP for frame-src, script-src, connect-src
  - Used in blog posts via embeds

- YouTube - Video embedding
  - CDN: `https://www.youtube.com`, `https://www.youtube-nocookie.com`
  - Allowed in CSP for frame-src
  - Used in blog posts via embeds

**Font Services:**
- Google Fonts API - Custom fonts
  - URL: `https://fonts.googleapis.com/css2`
  - Client: `src/utils/loadGoogleFont.ts`
  - PWA caching: 1-year cache in workbox config
  - Pattern: Loads fonts by name and weight

**Content Syndication:**
- RSS Feed - Blog syndication
  - Generated at `src/pages/rss.xml.ts` via `@astrojs/rss` 4.0.14
  - Includes all non-draft posts with title, description, pub date
  - Format: RSS 2.0

**Search:**
- Pagefind - Static site search engine
  - Package: `pagefind` 1.4.0 with UI `@pagefind/default-ui` 1.4.0
  - Execution: Runs post-build (`pagefind --site dist`)
  - Client-side: Fuse.js 7.1.0 for fuzzy matching
  - No backend required

## Data Storage

**Content:**
- Markdown/MDX files - Blog posts stored in `src/content/blog/`
  - Schema defined in `src/content.config.ts` using Astro's content collections
  - Fields: title, pubDatetime, modDatetime, description, tags, ogImage, etc.
  - File types: `.md`, `.mdx`
  - Loader: glob pattern from directory

**Static Files:**
- Local filesystem only - Images, avatars, public assets in `src/assets/` and `public/`
- No external file storage (S3, etc.)

**Caching:**
- Workbox (PWA) - Browser caching policy in `astro.config.mjs`:
  - Google Fonts: Cache-first, 1-year expiration
  - Images (*.png, *.jpg, *.webp): Cache-first, 30-day expiration
  - Static assets: Network-first fallback to `/404`

## Authentication & Identity

**Auth Provider:**
- None - Static site with no authentication
- Public read-only content
- GitHub edit links provided via `src/consts.ts` for community contributions

**GitHub Integration:**
- Repository: `steipete/steipete.me`
- Edit links: `https://github.com/steipete/steipete.me/edit/main/`
- Used for community contributions and issue tracking

## Monitoring & Observability

**Error Tracking:**
- Vercel Speed Insights - Captures Core Web Vitals and performance metrics
- No dedicated error tracking service configured

**Logs:**
- GitHub Actions - Build logs in `.github/workflows/`
- Vercel - Deployment logs (implicit via Vercel platform)
- Browser console - Client-side errors visible to developer

## CI/CD & Deployment

**Hosting:**
- Vercel - Primary deployment platform
  - Configuration: `vercel.json`
  - Domain: `steipete.me` (primary), `steipete.md` (markdown version)
  - Domain routing: Redirects from other domains to primary

**CI Pipeline:**
- GitHub Actions - Two workflows:
  1. **Astro Build** (`.github/workflows/astro-build.yml`):
     - Triggers: Push to main/astro-erudite-design, PR to main
     - Steps: Checkout, Node.js 20 setup, npm ci, build, dist check
     - Timeout: 15 minutes

  2. **Lint and Format** (`.github/workflows/lint.yml`):
     - Triggers: Push to main, PR to main
     - Steps: Checkout, Node.js setup, npm ci, Biome check
     - Timeout: 10 minutes

**Build Artifacts:**
- Output: `dist/` directory (static HTML, CSS, JS)
- Search index: `dist/pagefind/` (generated by pagefind)
- No docker or container images

## Environment Configuration

**Required env vars:**
- None detected - All configuration is hardcoded or injected at build time

**Build-time Configuration:**
- `ASTRO_TELEMETRY_DISABLED=1` - Disable Astro telemetry in CI
- Analytics injected only in production via `import.meta.env.PROD` check

**Secrets location:**
- No secrets detected in codebase
- Vercel environment variables (if any) managed via Vercel dashboard

**Deployment Redirects:**
- Old URL patterns → new canonical URLs:
  - `/yyyy/mm/dd/slug` → `/posts/slug` (date-based legacy URLs)
  - `/blog/:slug` → `/posts/slug` (old blog path)
  - `/categories/:cat` → `/tags/:cat` (category to tag migration)
  - Domain redirects: Non-primary domains → `https://steipete.me`

## Webhooks & Callbacks

**Incoming:**
- None detected

**Outgoing:**
- Vercel Analytics - Sends Web Vitals data to `https://va.vercel-scripts.com`
- Vercel Speed Insights - Sends performance metrics to `https://vitals.vercel-insights.com`

## Content Security Policy (CSP)

**Allowed External Domains** (via `vercel.json` headers):
- Self and primary domain: `steipete.me`
- Vercel: `*.vercel.app`
- External partners: `*.sweetistics.com`
- Media: `player.vimeo.com`, `vimeo.com`, `youtube.com`, `*.youtube-nocookie.com`
- Analytics: `va.vercel-scripts.com`, `vitals.vercel-insights.com`
- Social: `platform.twitter.com`, `cdn.syndication.twimg.com`
- Dev tools: `vercel.live` (for live editing)

**Blocked:**
- `object-src 'none'` - No plugins/objects
- `frame-ancestors 'none'` - Cannot be embedded

## Additional Service Integrations

**Markdown Processing:**
- astro-embed - Embeds tweets, videos, code blocks (package `astro-embed` 0.9.2)
- sharps for image optimization in OG generation

**Social Links** (from `src/constants.ts`):
- GitHub: `https://github.com/steipete`
- X/Twitter: `https://x.com/steipete`
- BlueSky: `https://bsky.app/profile/steipete.me`
- LinkedIn: `https://www.linkedin.com/in/steipete/`
- Email: `mailto:peter@steipete.me`
- RSS: `/rss.xml`

---

*Integration audit: 2026-01-28*
