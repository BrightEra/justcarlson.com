---
phase: 02-components
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/Footer.astro
  - src/components/Sidebar.astro
  - src/consts.ts
autonomous: true

must_haves:
  truths:
    - "Footer GitHub link points to justcarlson/justcarlson.com"
    - "Sidebar shows Justin Carlson identity, not Peter Steinberger"
    - "Sidebar social links use config values from SOCIAL_LINKS"
  artifacts:
    - path: "src/components/Footer.astro"
      provides: "Site footer with correct repo link"
      contains: "justcarlson"
    - path: "src/components/Sidebar.astro"
      provides: "Sidebar with config-driven identity"
      contains: "SITE"
    - path: "src/consts.ts"
      provides: "Newsletter config without provider lock-in"
      contains: "NEWSLETTER_CONFIG"
  key_links:
    - from: "src/components/Sidebar.astro"
      to: "src/consts.ts"
      via: "import { SITE, SOCIAL_LINKS }"
      pattern: "import.*SOCIAL_LINKS.*from.*consts"
---

<objective>
Update Footer.astro, Sidebar.astro, and clean up NEWSLETTER_CONFIG to complete the component layer identity transition.

Purpose: These components have hardcoded Peter/steipete references that appear across the site. Footer shows wrong repo link, Sidebar shows wrong identity.

Output: Footer and Sidebar consuming config values, newsletter config provider-agnostic
</objective>

<execution_context>
@/home/jc/.claude/get-shit-done/workflows/execute-plan.md
@/home/jc/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-components/02-CONTEXT.md
@.planning/phases/02-components/02-RESEARCH.md

# Key source files
@src/consts.ts
@src/components/Footer.astro
@src/components/Sidebar.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update Footer.astro GitHub link</name>
  <files>src/components/Footer.astro</files>
  <action>
Update the hardcoded GitHub repository link in Footer.astro:

Current:
```html
<a href="https://github.com/steipete/steipete.me" ...>
```

Change to:
```html
<a href="https://github.com/justcarlson/justcarlson.com" ...>
```

Keep the existing text "Steal this post -> CC BY 4.0 . Code MIT" (playful wording per CONTEXT.md Claude's discretion).

No other changes needed - component is minimal and functional.
  </action>
  <verify>
Run: `rg "steipete" src/components/Footer.astro`
Should return no matches.

Run: `rg "justcarlson" src/components/Footer.astro`
Should show the new GitHub URL.
  </verify>
  <done>
Footer.astro links to https://github.com/justcarlson/justcarlson.com
  </done>
</task>

<task type="auto">
  <name>Task 2: Update Sidebar.astro to use config values</name>
  <files>src/components/Sidebar.astro</files>
  <action>
Refactor Sidebar.astro to consume config values and remove hardcoded references:

1. Add imports at top of frontmatter:
   ```typescript
   import { SITE, SOCIAL_LINKS, ICON_MAP } from "@/consts";
   ```

2. Update avatar section:
   - Current: Hardcoded gravatar URL with Peter's hash (832ece085bfe2c7c5b0ed6be62d7e675)
   - Change to: Use Gravatar with a generic placeholder since no local avatar exists
   - Option A (placeholder): `https://gravatar.com/avatar/?s=240&d=mp` (mystery person default)
   - Option B (identicon): `https://gravatar.com/avatar/?s=240&d=identicon` (generated pattern)
   - Use Option A (mystery person) as it's more professional looking
   - Update alt text: `alt={SITE.author + "'s avatar"}`

3. Update subtitle:
   - Current: "iOS Developer, Entrepreneur, and Open Source Contributor"
   - Change to: `SITE.desc` which is "Writing about things I find interesting."
   - Per CONTEXT.md: "Thoughts on software, technology, and building things" is also acceptable

4. Update social links section (div.social-links):
   Replace hardcoded links with dynamic rendering from SOCIAL_LINKS:
   ```astro
   {SOCIAL_LINKS.map(link => {
     const isExternal = !link.href.startsWith('/');
     const iconClass = link.label === 'RSS' ? 'fas' : 'fab';
     const iconName = ICON_MAP[link.label] || link.label.toLowerCase();
     return (
       <a href={link.href} target={isExternal ? '_blank' : '_self'} rel={isExternal ? 'noopener noreferrer' : undefined}>
         <i class={`${iconClass} fa-${iconName}`}></i>
       </a>
     );
   })}
   ```

   Note: SOCIAL_LINKS contains GitHub, LinkedIn, RSS. No Twitter/email since user doesn't use them.

5. Remove email link entirely (user doesn't have public email in SOCIAL_LINKS).
6. Remove Twitter link (not in SOCIAL_LINKS).

Font Awesome icon mapping:
- GitHub -> fa-github-alt (fab)
- LinkedIn -> fa-linkedin (fab)
- RSS -> fa-rss (fas, not fab)
  </action>
  <verify>
Run: `rg -i "steipete|peter" src/components/Sidebar.astro`
Should return no matches.

Run: `rg "SOCIAL_LINKS" src/components/Sidebar.astro`
Should show config import and usage.
  </verify>
  <done>
Sidebar.astro uses SITE and SOCIAL_LINKS from config. Shows placeholder avatar with Justin Carlson identity. No hardcoded steipete/Peter references. Social links rendered dynamically from config.
  </done>
</task>

<task type="auto">
  <name>Task 3: Clean up NEWSLETTER_CONFIG provider reference</name>
  <files>src/consts.ts</files>
  <action>
Update NEWSLETTER_CONFIG in src/consts.ts to be provider-agnostic:

Current:
```typescript
export const NEWSLETTER_CONFIG = {
  enabled: false,
  provider: "buttondown", // or "convertkit", "mailchimp", etc.
  formAction: "",
  tag: "",
};
```

Change to:
```typescript
export const NEWSLETTER_CONFIG = {
  enabled: false,
  provider: "", // Set when newsletter service is configured (e.g., "buttondown", "convertkit")
  formAction: "", // Newsletter provider form action URL
  tag: "", // Optional tag for subscriber segmentation
};
```

This removes the default "buttondown" value and makes the config truly provider-agnostic per CONTEXT.md decision: "Buttondown reference removed, provider-agnostic approach"
  </action>
  <verify>
Run: `rg 'provider:' src/consts.ts`
Should show `provider: ""` (empty string), not `provider: "buttondown"`.
  </verify>
  <done>
NEWSLETTER_CONFIG.provider defaults to empty string with helpful comment. No provider lock-in.
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Footer verification:
   ```bash
   rg "justcarlson/justcarlson.com" src/components/Footer.astro
   ```
   Expected: Match showing correct repo URL

2. Sidebar verification:
   ```bash
   rg -i "steipete|peter" src/components/Sidebar.astro
   ```
   Expected: No matches

3. Newsletter config verification:
   ```bash
   rg 'provider:' src/consts.ts
   ```
   Expected: Shows `provider: ""` not `provider: "buttondown"`

4. Build verification:
   ```bash
   npm run build
   ```
   Expected: Build succeeds
</verification>

<success_criteria>
- Footer.astro links to justcarlson/justcarlson.com repository
- Sidebar.astro uses SITE and SOCIAL_LINKS config values
- Sidebar shows placeholder avatar (Gravatar default) with Justin Carlson identity
- Sidebar social links rendered dynamically from SOCIAL_LINKS (GitHub, LinkedIn, RSS only)
- NEWSLETTER_CONFIG has no default provider value (empty string)
- Build passes successfully
</success_criteria>

<output>
After completion, create `.planning/phases/02-components/02-02-SUMMARY.md`
</output>
