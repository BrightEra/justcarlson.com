---
phase: 04-content-polish
plan: 03
type: execute
wave: 2
depends_on: ["04-01", "04-02"]
files_modified:
  - src/styles/custom.css
  - README.md
  - src/pages/index.astro
  - src/pages/posts/index.astro
  - src/pages/search.astro
  - src/layouts/Layout.astro
  - src/utils/og-templates/post.js
  - src/pages/index.md.ts
autonomous: true

must_haves:
  truths:
    - "Zero identity leaks in source files (grep for steipete/peter/steinberger returns nothing)"
    - "README describes justcarlson.com repository"
    - "custom.css comment updated to remove steipete.me reference"
  artifacts:
    - path: "README.md"
      provides: "Repository documentation for justcarlson.com"
      contains: "justcarlson"
    - path: "src/styles/custom.css"
      provides: "Custom styles without identity references"
      contains: "Custom styles for layout"
  key_links:
    - from: "src/integrations/build-validator.ts"
      to: "grep for identity leaks"
      via: "build hook"
      pattern: "steipete\\|peter"
---

<objective>
Clean up identity leaks in source files and update repository documentation.

Purpose: Final cleanup pass to ensure no Peter Steinberger references remain in source files, and update README to describe the justcarlson.com repository properly.

Output: Clean source files with zero identity leaks and a README appropriate for the justcarlson.com repository.
</objective>

<execution_context>
@/home/jc/.claude/get-shit-done/workflows/execute-plan.md
@/home/jc/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-content-polish/04-CONTEXT.md
@.planning/phases/04-content-polish/04-RESEARCH.md
@.planning/phases/04-content-polish/04-01-SUMMARY.md
@.planning/phases/04-content-polish/04-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Clean identity leaks in source files</name>
  <files>
    src/styles/custom.css
    src/pages/index.astro
    src/pages/posts/index.astro
    src/pages/search.astro
    src/layouts/Layout.astro
    src/utils/og-templates/post.js
    src/pages/index.md.ts
  </files>
  <action>
Run identity leak detection and fix meaningful references in source files:

1. First, identify remaining leaks in src/ (excluding blog posts which were deleted):
   `grep -ri "steipete\|peter steinberger" src/ --include="*.astro" --include="*.ts" --include="*.tsx" --include="*.js" --include="*.css" --include="*.mdx"`

2. Fix each file based on context:

**src/styles/custom.css (line 1):**
- Change: `/* Custom styles for steipete.me-like layout */`
- To: `/* Custom styles for layout */`

**src/integrations/build-validator.ts:**
- This file contains grep patterns to DETECT leaks - do NOT modify it
- The patterns should remain to warn if new leaks are introduced

**Other source files (src/pages/*, src/layouts/*, src/utils/*):**
- Review each match and determine if it's:
  a) A meaningful reference to fix (change to generic or remove)
  b) Part of a URL redirect or external reference (evaluate if still needed)
  c) A comment that should be updated

3. For files that reference Peter's blog posts (like internal links):
   - If the link points to a deleted post, remove the link/reference
   - If it's a generic pattern, update to be generic

Use Claude's discretion per CONTEXT.md: fix meaningful leaks, ignore false positives.
Do NOT modify:
- Build validator patterns (they detect leaks)
- Any generated/dist files
- node_modules
  </action>
  <verify>
- `grep -ri "steipete\|peter steinberger" src/ --include="*.astro" --include="*.ts" --include="*.tsx" --include="*.js" --include="*.css" --include="*.mdx"` returns minimal/acceptable results
- `head -1 src/styles/custom.css` shows updated comment
  </verify>
  <done>Identity leaks cleaned from source files per Claude's discretion</done>
</task>

<task type="auto">
  <name>Task 2: Rewrite README.md</name>
  <files>README.md</files>
  <action>
Replace README.md with content for justcarlson.com repository:

```markdown
# justcarlson.com

My personal website and blog, built with [Astro](https://astro.build) and deployed on [Vercel](https://vercel.com).

## Overview

This site is a personal space for writing about software development, technology, and whatever else catches my interest.

## Setup

```bash
# Install dependencies
npm install

# Start development server
npm run dev
```

The dev server runs at `localhost:4321`.

## Development

| Command | Action |
|---------|--------|
| `npm run dev` | Start local dev server |
| `npm run build` | Build for production |
| `npm run preview` | Preview production build locally |

### Adding Blog Posts

Blog posts live in `src/content/blog/` organized by year. Create a new markdown file with frontmatter:

```markdown
---
title: "Post Title"
pubDatetime: 2026-01-29T12:00:00.000+00:00
description: "Brief description"
tags: ["tag1", "tag2"]
draft: false
---

Your content here.
```

## Deployment

Deployed automatically on Vercel when changes are pushed to main.

## Credits

Built on the excellent [AstroPaper theme](https://github.com/satnaing/astro-paper) by [Sat Naing](https://github.com/satnaing).

Forked from [steipete.me](https://github.com/steipete/steipete.me) with gratitude for the thoughtful customizations.

## License

- **Blog content**: [CC BY 4.0](http://creativecommons.org/licenses/by/4.0/)
- **Code**: [MIT License](LICENSE)
```

Key changes from original:
- Title changed to justcarlson.com
- Removed Peter's personal description
- Simplified structure (Overview, Setup, Development, Deployment, Credits)
- Added blog post creation instructions
- Full attribution to AstroPaper and steipete fork
- Clean look with no badges (per CONTEXT.md decision)
  </action>
  <verify>
- `cat README.md | head -5` shows justcarlson.com heading
- `grep -i "peter steinberger" README.md` returns nothing
- `grep "AstroPaper" README.md` returns attribution line
- `grep "steipete" README.md` returns attribution line (in Credits, not as identity)
  </verify>
  <done>README rewritten for justcarlson.com with proper attribution</done>
</task>

<task type="auto">
  <name>Task 3: Commit cleanup and README</name>
  <files>
    src/styles/custom.css
    README.md
    src/pages/*.astro
    src/layouts/*.astro
    src/utils/og-templates/*.js
  </files>
  <action>
Commit the cleanup work in logical groups:

1. If source files were modified:
   `git add src/`
   `git commit -m "chore(cleanup): remove identity references from source files"`

2. Commit README:
   `git add README.md`
   `git commit -m "docs: rewrite README for justcarlson.com"`
  </action>
  <verify>
- `git log --oneline -2` shows cleanup commits
- `git status` shows clean working directory
  </verify>
  <done>Cleanup and README changes committed</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `grep -ri "steipete\|peter steinberger" src/ --include="*.astro" --include="*.ts" --include="*.js" --include="*.css" --include="*.mdx"` returns only build-validator.ts patterns
2. `cat README.md` shows justcarlson.com documentation
3. `npm run build` succeeds
4. Build validator warnings significantly reduced (most were from deleted blog posts)
</verification>

<success_criteria>
- Source files cleaned of identity references (build-validator patterns preserved)
- README describes justcarlson.com repository
- Full attribution to AstroPaper and steipete fork in Credits
- Build succeeds with minimal/zero identity leak warnings
- All changes committed to git
</success_criteria>

<output>
After completion, create `.planning/phases/04-content-polish/04-03-SUMMARY.md`
</output>
