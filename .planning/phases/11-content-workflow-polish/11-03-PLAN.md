---
phase: 11-content-workflow-polish
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - .claude/commands/blog/install.md
  - .claude/commands/blog/publish.md
  - .claude/commands/blog/help.md
  - .claude/commands/blog/list-posts.md
  - .claude/commands/blog/maintain.md
  - .claude/commands/blog/unpublish.md
  - .claude/hooks/blog-session-start.sh
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Typing /blog: shows all blog commands in autocomplete"
    - "/blog:help shows list of all blog commands"
    - "SessionStart hook suggests /blog:install when vault not configured"
  artifacts:
    - path: ".claude/commands/blog/install.md"
      provides: "Install command at correct path"
    - path: ".claude/commands/blog/help.md"
      provides: "Help command at correct path"
    - path: ".claude/commands/blog/publish.md"
      provides: "Publish command at correct path"
    - path: ".claude/commands/blog/list-posts.md"
      provides: "List-posts command at correct path"
    - path: ".claude/commands/blog/maintain.md"
      provides: "Maintain command at correct path"
    - path: ".claude/commands/blog/unpublish.md"
      provides: "Unpublish command at correct path"
  key_links:
    - from: ".claude/hooks/blog-session-start.sh"
      to: "/blog:install"
      via: "command reference in output message"
      pattern: "/blog:install"
---

<objective>
Fix blog commands directory structure so Claude Code can discover them via /blog: prefix.

Purpose: UAT revealed commands are not discoverable because they're in wrong directory structure (.claude/skills/blog/<name>/SKILL.md instead of .claude/commands/blog/<name>.md)
Output: All 6 blog commands at correct paths, old skills directory removed, SessionStart hook working
</objective>

<execution_context>
@/home/jc/.claude/get-shit-done/workflows/execute-plan.md
@/home/jc/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-content-workflow-polish/11-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Convert skills to commands directory structure</name>
  <files>
    .claude/commands/blog/install.md
    .claude/commands/blog/publish.md
    .claude/commands/blog/help.md
    .claude/commands/blog/list-posts.md
    .claude/commands/blog/maintain.md
    .claude/commands/blog/unpublish.md
  </files>
  <action>
    Create `.claude/commands/blog/` directory and convert all 6 skills from the wrong path to the correct path:

    **Pattern being fixed:**
    - Wrong: `.claude/skills/blog/<name>/SKILL.md`
    - Correct: `.claude/commands/blog/<name>.md`

    **For each skill, copy content preserving frontmatter and body:**
    1. `.claude/skills/blog/install/SKILL.md` -> `.claude/commands/blog/install.md`
    2. `.claude/skills/blog/publish/SKILL.md` -> `.claude/commands/blog/publish.md`
    3. `.claude/skills/blog/help/SKILL.md` -> `.claude/commands/blog/help.md`
    4. `.claude/skills/blog/list-posts/SKILL.md` -> `.claude/commands/blog/list-posts.md`
    5. `.claude/skills/blog/maintain/SKILL.md` -> `.claude/commands/blog/maintain.md`
    6. `.claude/skills/blog/unpublish/SKILL.md` -> `.claude/commands/blog/unpublish.md`

    **Content stays identical** - only the file location changes. The frontmatter (name, description, hooks) and body remain exactly the same.

    After creating all commands, remove the old skills directory:
    ```bash
    rm -rf .claude/skills/blog/
    ```

    If `.claude/skills/` is now empty, remove it too:
    ```bash
    rmdir .claude/skills/ 2>/dev/null || true
    ```
  </action>
  <verify>
    ```bash
    # Verify all 6 commands exist at correct path
    ls -la .claude/commands/blog/

    # Verify old skills directory is gone
    ls .claude/skills/blog/ 2>&1 | grep -q "No such file"
    ```
  </verify>
  <done>
    - 6 command files exist at `.claude/commands/blog/*.md`
    - Old `.claude/skills/blog/` directory removed
    - Each command file has correct frontmatter with name: blog:<command>
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify SessionStart hook references correct command paths</name>
  <files>
    .claude/hooks/blog-session-start.sh
  </files>
  <action>
    Review `.claude/hooks/blog-session-start.sh` and verify it references the correct command names:
    - Should reference `/blog:install` (not a file path, just the command name in output)
    - Should reference `/blog:publish` (not a file path, just the command name in output)

    The hook outputs suggestion text like "Run /blog:install to set up." - this is correct because Claude Code resolves the slash command, not the hook.

    Check the hook script and confirm:
    1. Line 9 mentions `/blog:install` in the output message
    2. Line 19 mentions `/blog:publish` in the output message

    If the references are already correct (they should be - they reference command names, not file paths), no changes needed.

    Test the hook manually:
    ```bash
    # Test with vault not configured (should suggest install)
    CLAUDE_PROJECT_DIR=/home/jc/developer/justcarlson.com ./.claude/hooks/blog-session-start.sh
    ```
  </action>
  <verify>
    ```bash
    # Hook should output install suggestion when settings.local.json missing/empty
    cd /home/jc/developer/justcarlson.com
    CLAUDE_PROJECT_DIR=/home/jc/developer/justcarlson.com ./.claude/hooks/blog-session-start.sh | grep -q "/blog:install"
    echo "Hook references /blog:install: $?"
    ```
  </verify>
  <done>
    - SessionStart hook outputs "/blog:install" suggestion when vault not configured
    - Hook references command names (not file paths) in output messages
  </done>
</task>

</tasks>

<verification>
After both tasks complete:

1. **Directory structure correct:**
   ```bash
   ls .claude/commands/blog/
   # Should show: help.md, install.md, list-posts.md, maintain.md, publish.md, unpublish.md
   ```

2. **Old structure removed:**
   ```bash
   ls .claude/skills/blog/ 2>&1
   # Should error: No such file or directory
   ```

3. **Command frontmatter intact:**
   ```bash
   head -5 .claude/commands/blog/install.md
   # Should show frontmatter with name: blog:install
   ```

4. **Hook works:**
   ```bash
   CLAUDE_PROJECT_DIR=/home/jc/developer/justcarlson.com ./.claude/hooks/blog-session-start.sh
   # Should output suggestion mentioning /blog:install
   ```
</verification>

<success_criteria>
- All 6 blog commands exist at `.claude/commands/blog/<name>.md`
- Typing `/blog:` in Claude Code shows autocomplete with all commands
- `/blog:help` command works and shows command list
- SessionStart hook outputs `/blog:install` suggestion when vault not configured
- Old `.claude/skills/blog/` directory no longer exists
</success_criteria>

<output>
After completion, create `.planning/phases/11-content-workflow-polish/11-03-SUMMARY.md`
</output>
