---
phase: 01-foundation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/styles/global.css
  - src/components/BaseHead.astro
  - public/favicon.svg
  - public/favicon.ico
  - public/apple-touch-icon.png
  - src/pages/favicon.ico.ts
  - src/assets/favicon.png
autonomous: true

must_haves:
  truths:
    - "Light theme uses Leaf Blue colors (background #f2f5ec, accent #1158d1)"
    - "Dark theme uses AstroPaper v4 colors (background #000123, accent #617bff)"
    - "Favicon displays JC monogram and adapts to dark/light mode"
    - "Apple touch icon shows JC monogram"
  artifacts:
    - path: "src/styles/global.css"
      provides: "CSS custom properties for both themes"
      contains: "#f2f5ec"
    - path: "public/favicon.svg"
      provides: "Theme-adaptive SVG favicon"
      contains: "prefers-color-scheme"
    - path: "public/apple-touch-icon.png"
      provides: "180x180 PNG for iOS"
    - path: "src/components/BaseHead.astro"
      provides: "Updated meta tags with new theme colors"
      contains: "#1158d1"
  key_links:
    - from: "src/components/BaseHead.astro"
      to: "public/favicon.svg"
      via: "link rel=icon"
      pattern: "rel=\"icon\".*favicon"
    - from: "src/styles/global.css"
      to: "src/components/BaseHead.astro"
      via: "theme-color meta tags match CSS variables"
      pattern: "theme-color.*#1158d1"
---

<objective>
Apply Leaf Blue and AstroPaper v4 color schemes and implement JC monogram favicon

Purpose: Establish the visual identity for justcarlson.com with the chosen color schemes (Leaf Blue for light mode, AstroPaper v4 for dark mode) and create a theme-adaptive JC monogram favicon.

Output: Updated global CSS with new theme colors, theme-adaptive SVG favicon, Apple touch icon, ICO fallback, and updated BaseHead.astro meta tags.
</objective>

<execution_context>
@/home/jc/.claude/get-shit-done/workflows/execute-plan.md
@/home/jc/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation/01-CONTEXT.md
@.planning/phases/01-foundation/01-RESEARCH.md
@src/styles/global.css
@src/components/BaseHead.astro
@~/Downloads/favicon.svg
</context>

<tasks>

<task type="auto">
  <name>Task 1: Apply theme colors to global.css</name>
  <files>src/styles/global.css</files>
  <action>
Update the CSS custom properties in global.css with Leaf Blue (light) and AstroPaper v4 (dark) colors:

```css
:root,
html[data-theme="light"] {
  --background: #f2f5ec;  /* Leaf Blue background */
  --foreground: #282728;  /* Keep existing dark text */
  --accent: #1158d1;      /* Leaf Blue accent (blue) */
  --muted: #dde3d5;       /* Harmonized with Leaf Blue bg */
  --border: #c8d1c0;      /* Slightly darker than muted */
}

html[data-theme="dark"] {
  --background: #000123;  /* AstroPaper v4 dark navy */
  --foreground: #eaedf3;  /* Keep existing light text */
  --accent: #617bff;      /* AstroPaper v4 purple-blue accent */
  --muted: #1a1a3d;       /* Dark navy muted */
  --border: #2a2a5a;      /* Slightly lighter than muted */
}
```

The muted and border colors are derived to harmonize with the specified background/accent:
- Light mode: Muted/border are greenish-gray tones that complement Leaf Blue's warm sage background
- Dark mode: Muted/border are deep navy tones that work with the AstroPaper v4 dark blue background
  </action>
  <verify>
Run: `grep -E "#f2f5ec|#1158d1|#000123|#617bff" src/styles/global.css` - should show all four core colors
  </verify>
  <done>Light mode uses Leaf Blue (#f2f5ec bg, #1158d1 accent), dark mode uses AstroPaper v4 (#000123 bg, #617bff accent)</done>
</task>

<task type="auto">
  <name>Task 2: Create theme-adaptive favicon and Apple touch icon</name>
  <files>public/favicon.svg, public/apple-touch-icon.png, src/assets/favicon.png</files>
  <action>
**Step 1:** Create public/favicon.svg with embedded dark mode support:

```svg
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
  <style>
    rect { fill: #f2f5ec; }
    text { fill: #1158d1; }
    @media (prefers-color-scheme: dark) {
      rect { fill: #000123; }
      text { fill: #617bff; }
    }
  </style>
  <rect width="512" height="512"/>
  <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-family="system-ui, -apple-system, sans-serif" font-weight="bold" font-size="280">JC</text>
</svg>
```

This SVG:
- Uses the exact theme colors from global.css
- Responds to system dark mode via CSS media query
- Uses system fonts for consistent rendering
- Matches the reference design (bold JC, centered)

**Step 2:** Create src/assets/favicon.png (512x512) for ICO generation.

Create a simple Node script to generate the PNG:

```bash
# Create src/assets directory if needed
mkdir -p src/assets

# Use Sharp to convert SVG to PNG (for ICO generation source)
node -e "
const sharp = require('sharp');
const svg = \`<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">
  <rect width=\"512\" height=\"512\" fill=\"#1158d1\"/>
  <text x=\"50%\" y=\"50%\" dominant-baseline=\"middle\" text-anchor=\"middle\" font-family=\"system-ui, -apple-system, sans-serif\" font-weight=\"bold\" font-size=\"280\" fill=\"#ffffff\">JC</text>
</svg>\`;

sharp(Buffer.from(svg))
  .resize(512, 512)
  .png()
  .toFile('src/assets/favicon.png')
  .then(() => console.log('Created src/assets/favicon.png'));
"
```

**Step 3:** Create public/apple-touch-icon.png (180x180):

Apple touch icons need:
- Solid background (no transparency)
- 180x180 pixels
- Use accent color as background with white text (better visibility on iOS)

```bash
node -e "
const sharp = require('sharp');
const svg = \`<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 180 180\">
  <rect width=\"180\" height=\"180\" fill=\"#1158d1\"/>
  <text x=\"50%\" y=\"50%\" dominant-baseline=\"middle\" text-anchor=\"middle\" font-family=\"system-ui, -apple-system, sans-serif\" font-weight=\"bold\" font-size=\"98\" fill=\"#ffffff\">JC</text>
</svg>\`;

sharp(Buffer.from(svg))
  .resize(180, 180)
  .png()
  .toFile('public/apple-touch-icon.png')
  .then(() => console.log('Created public/apple-touch-icon.png'));
"
```

**Step 4:** Delete peter-avatar.jpg (no longer needed as touch icon):

```bash
rm -f public/peter-avatar.jpg
```
  </action>
  <verify>
Run: `ls -la public/favicon.svg public/apple-touch-icon.png src/assets/favicon.png` - all three files should exist
Run: `grep "prefers-color-scheme" public/favicon.svg` - should show media query
Run: `file public/apple-touch-icon.png` - should show PNG image, 180x180
  </verify>
  <done>public/favicon.svg is theme-adaptive, public/apple-touch-icon.png is 180x180 PNG, src/assets/favicon.png exists for ICO generation, peter-avatar.jpg deleted</done>
</task>

<task type="auto">
  <name>Task 3: Update BaseHead.astro with new favicon links and theme colors</name>
  <files>src/components/BaseHead.astro</files>
  <action>
Update the favicon, PWA, and theme-color sections in BaseHead.astro:

**Favicon section (replace existing):**
```html
<!-- Favicon -->
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<link rel="icon" type="image/x-icon" href="/favicon.ico" />
<link rel="apple-touch-icon" href="/apple-touch-icon.png" />
<link rel="manifest" href="/manifest.webmanifest" />
```

SVG is primary (modern browsers), ICO is fallback (legacy).

**PWA Meta Tags section (update app names):**
```html
<!-- PWA Meta Tags -->
<meta name="mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="default" />
<meta name="apple-mobile-web-app-title" content="Just Carlson" />
<meta name="application-name" content="Just Carlson" />
<meta name="msapplication-TileColor" content="#1158d1" />
```

**Theme Color section (update colors):**
```html
<!-- Theme Color -->
<meta
  name="theme-color"
  content="#1158d1"
  media="(prefers-color-scheme: light)"
/>
<meta
  name="theme-color"
  content="#617bff"
  media="(prefers-color-scheme: dark)"
/>
```

**Twitter section (remove Peter's handle):**
Change:
```html
<meta name="twitter:site" content="@steipete" />
<meta name="twitter:creator" content="@steipete" />
```
To:
```html
<!-- Twitter card (no site/creator since no Twitter account) -->
```
Or simply remove these two meta tags entirely since the user doesn't have Twitter.
  </action>
  <verify>
Run: `grep -E "steipete|peter" src/components/BaseHead.astro` - should return nothing
Run: `grep -E "#1158d1|#617bff|Just Carlson" src/components/BaseHead.astro` - should show theme colors and app name
Run: `grep "favicon.svg" src/components/BaseHead.astro` - should show SVG favicon link
  </verify>
  <done>BaseHead.astro uses favicon.svg as primary, apple-touch-icon.png for iOS, theme colors match Leaf Blue/AstroPaper v4, no Peter references remain</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Theme colors applied:
   ```bash
   grep -E "#f2f5ec|#1158d1" src/styles/global.css
   grep -E "#000123|#617bff" src/styles/global.css
   ```
   Expected: Both light and dark theme colors present

2. Favicon files exist:
   ```bash
   ls -la public/favicon.svg public/apple-touch-icon.png
   file public/apple-touch-icon.png
   ```
   Expected: Both files exist, PNG is 180x180

3. No Peter references:
   ```bash
   grep -r -E "steipete|peter|steinberger" src/styles/global.css src/components/BaseHead.astro public/
   ```
   Expected: No matches (except maybe in files we didn't touch like images)

4. Build check:
   ```bash
   npm run build
   ```
   Expected: Build succeeds

5. Visual verification (manual):
   ```bash
   npm run dev
   ```
   Open http://localhost:4321 and verify:
   - Light mode has sage green background (#f2f5ec) with blue accent
   - Dark mode has deep navy background (#000123) with purple-blue accent
   - Favicon shows JC in browser tab
</verification>

<success_criteria>
- [ ] src/styles/global.css light mode uses #f2f5ec background, #1158d1 accent
- [ ] src/styles/global.css dark mode uses #000123 background, #617bff accent
- [ ] public/favicon.svg exists with embedded dark mode CSS media query
- [ ] public/apple-touch-icon.png exists as 180x180 PNG
- [ ] src/components/BaseHead.astro references favicon.svg as primary icon
- [ ] src/components/BaseHead.astro theme-color meta tags match new colors
- [ ] src/components/BaseHead.astro has no steipete/peter references
- [ ] public/peter-avatar.jpg deleted
- [ ] npm run build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-02-SUMMARY.md`
</output>
